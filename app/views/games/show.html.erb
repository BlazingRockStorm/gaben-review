<% provide :title, @game.name %>

<div class="uk-margin">
  <br>
  <h1 style="color: #fff"><%= @game.name %>
  </h1>
  <div class="container" id="content">
    <div id="info">
      <h1 style="color: #fff; margin-top: 20px; text-align: left;"><%= t (".info") %></h1>
      <br><h2 style="color: #fff; text-align: left"><%= @game.details %></br></h2>
      <h1 style="color: #fff; margin-top: 20px; text-align: left;"><%= t (".price") %></h1>
      <br><h2 style="color: #fff; text-align: left">$<%= @game.price %></br></h2>
      <h1 style="color: #fff; margin-top: 20px; text-align: left;"><%= t (".genre") %></h1>
      <br>
        <h2 style="color: #fff; text-align: left">
          <% @game.genres.each do |genre| %>
          <%= genre.genre %>
          <% end %>
        </h2>
      </br>
      <h1 style="color: #fff; margin-top: 20px; text-align: left;"><%= t (".avg_score") %></h1>

      <div id="score_ruby_var" data-score="<%= @game.count_average_score %>"
                               data-max_score="<%= Settings.max_score %>"></div>
      <div class="wthreeratingaits">
        <%= render "shared/star", score: @game.count_average_score %>
      </div>

    </div>
    <div id="picture">
      <div class="w3portfolioaits-items">
      <% @game.screenshots.each.with_index(1) do |screenshot, index| %>
        <div class="<%= "col-md-3 w3portfolioaits-item w3portfolioaits-item-#{index}" %>">
        <%= link_to(screenshot.picture.url, {class: "example-image-link",:"data-lightbox" => "example-set"}) do %>
          <div class="grid">
            <figure class="effect-apollo">
              <%= image_tag(screenshot.picture.url, alt: "Game Robo") %>
                <figcaption></figcaption>
            </figure>
          </div>
        <% end %>
        </div>
    <% end %>
      <div class="clearfix"></div>
      </div>
    </div>
  </div>
  <h1 style="color: #fff; margin-top: 20px;">Reviews
    <ol>
      <% if logged_in? %>
        <%= render "reviews/comment", game_id: @game.id %>
      <% end %>
      <div id="reviews">
        <%= render @game.reviews %>
      </div>
    </ol>
  </h1>
<div>

<!-- Popup-Box-JavaScript -->
<script src="assets/jquery.chocolat.js"></script>
<script type="text/javascript">
  $(function() {
    $('.w3portfolioaits-item a').Chocolat();
  });
</script>
<!-- //Popup-Box-JavaScript -->

<script type="text/javascript">
  $(".fa").mouseover(function() {
    var i = 1;
    for(; i <= this.id.slice(-1); i++) {
      $("#star_" + i).removeClass();
      $("#star_" + i).addClass("fa");
      $("#star_" + i).addClass("fa-star");
    }
    for(; i <= 5; i++) {
      $("#star_" + i).removeClass();
      $("#star_" + i).addClass("fa");
      $("#star_" + i).addClass("fa-star-o");
    }
  });

  $(".fa").mouseout(function() {
    var score = $("#score_ruby_var").data("score");
    var max_score = $("#score_ruby_var").data("max_score");
    var i = 1;
    for(; i <= Math.floor(score); i++) {
      // console.log(i + " fa-star");
      $("#star_" + i).removeClass();
      $("#star_" + i).addClass("fa");
      $("#star_" + i).addClass("fa-star");
    }
    if (!(score % 1 == 0)) {
      // console.log(i + " fa-star-half-o");
      $("#star_" + i).removeClass();
      $("#star_" + i).addClass("fa");
      $("#star_" + i).addClass("fa-star-half-o");
      i++;
    }
    for(; i <= max_score; i++) {
      // console.log(i + " fa-star-o");
      $("#star_" + i).removeClass();
      $("#star_" + i).addClass("fa");
      $("#star_" + i).addClass("fa-star-o");
    }
  });
</script>
