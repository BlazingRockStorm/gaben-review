<% provide :title, @game.name %>

<div
  class="uk-height-large uk-background-cover uk-light uk-flex"
  style="background-image: url('<%= @game.picture.url %>');"
  uk-parallax="bgy: -200"
>
  <h1 class="uk-width-1-2@m uk-text-center uk-margin-auto uk-margin-auto-vertical">
    <%= @game.name %>
  </h1>
</div>

<div class="container">
  <br><br>
  <h2 style="color: #fff"><%= t (".info") %></h2>
  <br><br>
  <div class="uk-grid">
    <div class="uk-width-1-3@m">
      <div
        id="score_ruby_var"
        data-score="<%= @game.count_average_score %>"
        data-max_score="<%= Settings.max_score %>"
      ></div>
      <div class="wthreeratingaits" id="game_star">
        <%= render "shared/star", score: @game.count_average_score %>
      </div>
      <h3 style="color: #fff; text-align: left;">
        <%= t (".price") %>: $<%= @game.price %>
      </h3>
      <br>
      <h3 style="color: #fff; text-align: left;">
        <%= t (".genre") %>:
        <span style="color: #fff; text-align: left;">
          <% @game.genres.each do |genre| %>
            <%= genre.genre %>
          <% end %>
        </span>
      </h3>
      <br>
    </div>
    <br>
    <div uk-slider class="uk-width-expand@m">
      <div class="uk-position-relative">
        <div class="uk-slider-container uk-light">
          <ul class="uk-slider-items uk-child-width-1-2 uk-child-width-1-3@s uk-child-width-1-4@m">
            <% @game.screenshots.each.with_index(1) do |screenshot, index| %>
              <li>
                <div uk-lightbox>
                  <%= link_to(screenshot.picture.url, style: "height: 100%") do %>
                    <%= image_tag(screenshot.picture.url, alt: "Game Robo") %>
                  <% end %>
                </div>
              </li>
            <% end %>
          </ul>
        </div>
        <div class="uk-hidden@s uk-light">
          <a class="uk-position-center-left uk-position-small" href="#" uk-slidenav-previous uk-slider-item="previous"></a>
          <a class="uk-position-center-right uk-position-small" href="#" uk-slidenav-next uk-slider-item="next"></a>
        </div>
        <div class="uk-visible@s">
          <a class="uk-position-center-left-out uk-position-small" href="#" uk-slidenav-previous uk-slider-item="previous"></a>
          <a class="uk-position-center-right-out uk-position-small" href="#" uk-slidenav-next uk-slider-item="next"></a>
        </div>
      </div>
      <ul class="uk-slider-nav uk-dotnav uk-flex-center uk-margin"></ul>
    </div>
  </div>
</div>

<div>
  <br>
  <br>
  <div class="uk-card uk-card-default uk-card-body">
    <div class="container">
      <h2>Reviews</h2>
      <div id="comment_area">
        <% if logged_in? %>
          <%= render "reviews/comment", game_id: @game.id %>
        <% end %>
      </div>
      <ul class="uk-list uk-list-large uk-list-divider">
        <%= render @game.reviews %>
      </ul>
    </div>
  </div>
</div>

<!-- Popup-Box-JavaScript -->
<script src="/assets/jquery.chocolat.js"></script>
<script type="text/javascript">
  $(function() {
    $('.w3portfolioaits-item a').Chocolat();
  });
</script>
<!-- //Popup-Box-JavaScript -->

<script type="text/javascript">
  $(".fa").mouseover(function() {
    var i = 1;
    for(; i <= this.id.slice(-1); i++) {
      $("#star_" + i).removeClass();
      $("#star_" + i).addClass("fa");
      $("#star_" + i).addClass("fa-star");
    }
    for(; i <= 5; i++) {
      $("#star_" + i).removeClass();
      $("#star_" + i).addClass("fa");
      $("#star_" + i).addClass("fa-star-o");
    }
  });
   $(".fa").mouseout(function() {
    var score = $("#score_ruby_var").data("score");
    var max_score = $("#score_ruby_var").data("max_score");
    var i = 1;
    for(; i <= Math.floor(score); i++) {
      // console.log(i + " fa-star");
      $("#star_" + i).removeClass();
      $("#star_" + i).addClass("fa");
      $("#star_" + i).addClass("fa-star");
    }
    if (!(score % 1 == 0)) {
      // console.log(i + " fa-star-half-o");
      $("#star_" + i).removeClass();
      $("#star_" + i).addClass("fa");
      $("#star_" + i).addClass("fa-star-half-o");
      i++;
    }
    for(; i <= max_score; i++) {
      // console.log(i + " fa-star-o");
      $("#star_" + i).removeClass();
      $("#star_" + i).addClass("fa");
      $("#star_" + i).addClass("fa-star-o");
    }
  });
</script>
